defmodule ApaExample do
  import Apa
  import Kernel, except: [+: 2, -: 2, *: 2, /: 2, to_string: 1, abs: 1]

  @doc """
    Test function for profile - see benchee/profile_decimal_add.md
  """
  def profile() do
    # Decimal
    # Decimal.add(123_456_789, 987_654_321)

    # Decimal.add(
    #   %Decimal{sign: 1, coef: 123_456_789, exp: -3},
    #   %Decimal{sign: 1, coef: 987_654_321, exp: 5}
    # )
    l =
      123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_112_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_112_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901

    r =
      893_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_112_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_112_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_999

    # l = 123
    # r =
    #   893_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901

    # l =
    #   123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901
    # r =
    #   893_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_012_345_678_901_234_567_890_123_456_789_011_234_567_890_123_456_789_012_345_678_901

    ApaDiv.bc_div_apa_number({l, -12}, {r, 12})

    ################################################################################
    # Attantion this input of l = -3 is possible - but gives an infinite loop!!!
    ################################################################################
    # l = -3
    # r = 388_888_888_888_888_888_888
    # Decimal.div(%Decimal{sign: 1, coef: l, exp: -12}, %Decimal{sign: 1, coef: r, exp: 12})
    # Decimal.div(%Decimal{sign: -1, coef: 3, exp: 0}, %Decimal{
    #   sign: 1,
    #   coef: 388_888_888_888_888_888_888,
    #   exp: 0
    # })
    ################################################################################

    # Apa
    # ApaAdd.bc_add_apa_number({123_456_789, -3}, {987_654_321, 5})
    # Apa.add(123_456_789, 987_654_321)
  end

  def the_answer() do
    apa1 = Apa.add("1", "2")
    apa2 = Apa.sub("3", "2")
    IO.puts("apa1: #{apa1} apa2: #{apa2}")

    price = "3.50"
    quantity = "12"
    total_string = price * quantity
    IO.puts("Total: #{total_string}")

    IO.puts("The Answer to the Ultimate Question of Life, the Universe, and Everything is: ")

    "1"
    |> Apa.add("2")
    |> Apa.add("3")
    |> Apa.sub("4")
    |> Apa.add("5")
    |> Apa.mul("6")
  end
end

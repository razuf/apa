inputs = %{
  "606 Digits Integer as String" =>
    {"123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901",
     "893456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678999"},
  "606 Digits Dec as String" =>
    {"123.456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901",
     "893456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789011234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890112345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678.999"}
}

bench = %{
  "Decimal.add() strings" => fn {l, r} ->
    Decimal.add(l, r) |> Decimal.to_string()
  end,
  "Apa.add()     strings" => fn {l, r} ->
    Apa.add(l, r)
  end
}

Benchee.run(bench,
  inputs: inputs,
  before_scenario: fn input ->
    Decimal.Context.set(%Decimal.Context{Decimal.Context.get() | rounding: :floor, precision: 606})

    input
  end,
  time: 6,
  warmup: 6,
  memory_time: 1,
  print: [fast_warning: false]
)

# more comparable with string input/output

# ##### With input 606 Digits Dec as String #####
# Name                            ips        average  deviation         median         99th %
# Apa.add()     strings        7.69 K      130.08 μs    ±12.04%      127.98 μs      208.98 μs
# Decimal.add() strings        5.94 K      168.27 μs    ±11.04%      163.98 μs      253.98 μs

# Comparison:
# Apa.add()     strings        7.69 K
# Decimal.add() strings        5.94 K - 1.29x slower +38.19 μs

# Memory usage statistics:

# Name                     Memory usage
# Apa.add()     strings        42.52 KB
# Decimal.add() strings        37.21 KB - 0.88x memory usage -5.31250 KB

# **All measurements for memory usage were the same**

# ##### With input 606 Digits Integer as String #####
# Name                            ips        average  deviation         median         99th %
# Apa.add()     strings       19.82 K       50.45 μs    ±16.20%       47.98 μs       92.98 μs
# Decimal.add() strings       10.33 K       96.84 μs    ±16.24%       91.98 μs      167.98 μs

# Comparison:
# Apa.add()     strings       19.82 K
# Decimal.add() strings       10.33 K - 1.92x slower +46.39 μs

# Memory usage statistics:

# Name                     Memory usage
# Apa.add()     strings        42.38 KB
# Decimal.add() strings        56.20 KB - 1.33x memory usage +13.81 KB
